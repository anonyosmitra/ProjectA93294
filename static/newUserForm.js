var errors=[false,false,false,false]
function makeForm(){
 ReactDOM.render(<Form />, document.getElementById("formBox"));}

class Form extends React.Component {
    render() {
    return(
		<form id="newUserForm" action={window.location.href} method="post">
		<Name /><br></br>
		<Dob /><br></br>
		<Phone /><br></br>
		<Email /><br></br>
		<input type="button" value="Submit" onclick={onSubmit}></input>
		</form>
	)}
	onSubmit(){
	if(val(errors.join('+'))==0)
	    document.getElementById("newUserForm").submit();
	else
	    alert("Invalid information in form")
	}
	}
class Name extends React.Component {
        onChange(){
            var name=event.target.value;
            var hide=true
            for(var i in name)
                if (!(/[a-zA-Z]/).test(name[i]))
                    hide=false;
            document.getElementById("nameWarning").hidden=hide;
            errors[0]=hide
        }
        render() {
          return (<div><b>Name:</b>
          <input onBlur={this.onChange} name="name"></input>
          <span id="nameWarning" style={{color:"red",cursor: "default"}} hidden>
            <abbr title="Invalid Name">&#9888;</abbr>
          </span></div>)
        }
      }
class Dob extends React.Component {
        onChange(){
            var dob=event.target.value;
            var hide=true
            var b=dob.split("-")
            for(var i in b)
                b[i]=parseInt(b[i])
            var now=new Date()
            if(now.getFullYear()<b[0]+18)
                {
                hide=false}
            else{
            if(now.getFullYear()==b[0]+18)
                if (now.getMonth()+1<b[1])
                {
                    hide=false}
                else {
                if (now.getMonth()+1==b[1]){
                     if (now.getDate()<b[2]){
                        hide=false}}}}
            document.getElementById("dobWarning").hidden=hide;
            errors[1]=hide
        }
        render() {
          return (<div><b>Date of Birth:</b>
          <input onChange={this.onChange} name="dob" type="date"></input>
          <span id="dobWarning" style={{color:"red",cursor: "default"}} hidden>
            <abbr title="User must be above 18!">&#9888;</abbr>
          </span></div>)
        }
      }
const countryCodes=[
{"uid":"IN","flag":"ğŸ‡®ğŸ‡³","code":"91"},
{"uid":"AD","flag":"ğŸ‡¦ğŸ‡©","code":"376"},
{"uid":"AE","flag":"ğŸ‡¦ğŸ‡ª","code":"971"},
{"uid":"AF","flag":"ğŸ‡¦ğŸ‡«","code":"93"},
{"uid":"AI","flag":"ğŸ‡¦ğŸ‡®","code":"1264"},
{"uid":"AL","flag":"ğŸ‡¦ğŸ‡±","code":"355"},
{"uid":"AM","flag":"ğŸ‡¦ğŸ‡²","code":"374"},
{"uid":"AO","flag":"ğŸ‡¦ğŸ‡´","code":"244"},
{"uid":"AR","flag":"ğŸ‡¦ğŸ‡·","code":"54"},
{"uid":"AS","flag":"ğŸ‡¦ğŸ‡¸","code":"1684"},
{"uid":"AT","flag":"ğŸ‡¦ğŸ‡¹","code":"43"},
{"uid":"AU","flag":"ğŸ‡¦ğŸ‡º","code":"61"},
{"uid":"AW","flag":"ğŸ‡¦ğŸ‡¼","code":"297"},
{"uid":"AZ","flag":"ğŸ‡¦ğŸ‡¿","code":"994"},
{"uid":"BB","flag":"ğŸ‡§ğŸ‡§","code":"1246"},
{"uid":"BD","flag":"ğŸ‡§ğŸ‡©","code":"880"},
{"uid":"BE","flag":"ğŸ‡§ğŸ‡ª","code":"32"},
{"uid":"BF","flag":"ğŸ‡§ğŸ‡«","code":"226"},
{"uid":"BG","flag":"ğŸ‡§ğŸ‡¬","code":"359"},
{"uid":"BH","flag":"ğŸ‡§ğŸ‡­","code":"973"},
{"uid":"BI","flag":"ğŸ‡§ğŸ‡®","code":"257"},
{"uid":"BJ","flag":"ğŸ‡§ğŸ‡¯","code":"229"},
{"uid":"BM","flag":"ğŸ‡§ğŸ‡²","code":"1441"},
{"uid":"BN","flag":"ğŸ‡§ğŸ‡³","code":"673"},
{"uid":"BO","flag":"ğŸ‡§ğŸ‡´","code":"591"},
{"uid":"BR","flag":"ğŸ‡§ğŸ‡·","code":"55"},
{"uid":"BT","flag":"ğŸ‡§ğŸ‡¹","code":"975"},
{"uid":"BW","flag":"ğŸ‡§ğŸ‡¼","code":"267"},
{"uid":"BY","flag":"ğŸ‡§ğŸ‡¾","code":"375"},
{"uid":"BZ","flag":"ğŸ‡§ğŸ‡¿","code":"501"},
{"uid":"CA","flag":"ğŸ‡¨ğŸ‡¦","code":"1"},
{"uid":"CF","flag":"ğŸ‡¨ğŸ‡«","code":"236"},
{"uid":"CH","flag":"ğŸ‡¨ğŸ‡­","code":"41"},
{"uid":"CK","flag":"ğŸ‡¨ğŸ‡°","code":"682"},
{"uid":"CL","flag":"ğŸ‡¨ğŸ‡±","code":"56"},
{"uid":"CM","flag":"ğŸ‡¨ğŸ‡²","code":"237"},
{"uid":"CN","flag":"ğŸ‡¨ğŸ‡³","code":"86"},
{"uid":"CO","flag":"ğŸ‡¨ğŸ‡´","code":"57"},
{"uid":"CR","flag":"ğŸ‡¨ğŸ‡·","code":"506"},
{"uid":"CU","flag":"ğŸ‡¨ğŸ‡º","code":"53"},
{"uid":"CV","flag":"ğŸ‡¨ğŸ‡»","code":"238"},
{"uid":"CW","flag":"ğŸ‡¨ğŸ‡¼","code":"599"},
{"uid":"CY","flag":"ğŸ‡¨ğŸ‡¾","code":"357"},
{"uid":"DE","flag":"ğŸ‡©ğŸ‡ª","code":"49"},
{"uid":"DJ","flag":"ğŸ‡©ğŸ‡¯","code":"253"},
{"uid":"DK","flag":"ğŸ‡©ğŸ‡°","code":"45"},
{"uid":"DM","flag":"ğŸ‡©ğŸ‡²","code":"1767"},
{"uid":"DO","flag":"ğŸ‡©ğŸ‡´","code":"1809"},
{"uid":"DZ","flag":"ğŸ‡©ğŸ‡¿","code":"213"},
{"uid":"EC","flag":"ğŸ‡ªğŸ‡¨","code":"593"},
{"uid":"EE","flag":"ğŸ‡ªğŸ‡ª","code":"372"},
{"uid":"EG","flag":"ğŸ‡ªğŸ‡¬","code":"20"},
{"uid":"EH","flag":"ğŸ‡ªğŸ‡­","code":"212"},
{"uid":"ER","flag":"ğŸ‡ªğŸ‡·","code":"291"},
{"uid":"ES","flag":"ğŸ‡ªğŸ‡¸","code":"34"},
{"uid":"ET","flag":"ğŸ‡ªğŸ‡¹","code":"251"},
{"uid":"FI","flag":"ğŸ‡«ğŸ‡®","code":"358"},
{"uid":"FJ","flag":"ğŸ‡«ğŸ‡¯","code":"679"},
{"uid":"FK","flag":"ğŸ‡«ğŸ‡°","code":"500"},
{"uid":"FO","flag":"ğŸ‡«ğŸ‡´","code":"298"},
{"uid":"FR","flag":"ğŸ‡«ğŸ‡·","code":"33"},
{"uid":"GA","flag":"ğŸ‡¬ğŸ‡¦","code":"241"},
{"uid":"GB","flag":"ğŸ‡¬ğŸ‡§","code":"44"},
{"uid":"GD","flag":"ğŸ‡¬ğŸ‡©","code":"1473"},
{"uid":"GE","flag":"ğŸ‡¬ğŸ‡ª","code":"995"},
{"uid":"GF","flag":"ğŸ‡¬ğŸ‡«","code":"594"},
{"uid":"GG","flag":"ğŸ‡¬ğŸ‡¬","code":"44"},
{"uid":"GH","flag":"ğŸ‡¬ğŸ‡­","code":"233"},
{"uid":"GI","flag":"ğŸ‡¬ğŸ‡®","code":"350"},
{"uid":"GL","flag":"ğŸ‡¬ğŸ‡±","code":"299"},
{"uid":"GN","flag":"ğŸ‡¬ğŸ‡³","code":"224"},
{"uid":"GP","flag":"ğŸ‡¬ğŸ‡µ","code":"590"},
{"uid":"GQ","flag":"ğŸ‡¬ğŸ‡¶","code":"240"},
{"uid":"GR","flag":"ğŸ‡¬ğŸ‡·","code":"30"},
{"uid":"GT","flag":"ğŸ‡¬ğŸ‡¹","code":"502"},
{"uid":"GU","flag":"ğŸ‡¬ğŸ‡º","code":"1671"},
{"uid":"GW","flag":"ğŸ‡¬ğŸ‡¼","code":"245"},
{"uid":"GY","flag":"ğŸ‡¬ğŸ‡¾","code":"592"},
{"uid":"HN","flag":"ğŸ‡­ğŸ‡³","code":"504"},
{"uid":"HR","flag":"ğŸ‡­ğŸ‡·","code":"385"},
{"uid":"HT","flag":"ğŸ‡­ğŸ‡¹","code":"509"},
{"uid":"HU","flag":"ğŸ‡­ğŸ‡º","code":"36"},
{"uid":"ID","flag":"ğŸ‡®ğŸ‡©","code":"62"},
{"uid":"IE","flag":"ğŸ‡®ğŸ‡ª","code":"353"},
{"uid":"IL","flag":"ğŸ‡®ğŸ‡±","code":"972"},
{"uid":"IO","flag":"ğŸ‡®ğŸ‡´","code":"246"},
{"uid":"IQ","flag":"ğŸ‡®ğŸ‡¶","code":"964"},
{"uid":"IR","flag":"ğŸ‡®ğŸ‡·","code":"98"},
{"uid":"IS","flag":"ğŸ‡®ğŸ‡¸","code":"354"},
{"uid":"IT","flag":"ğŸ‡®ğŸ‡¹","code":"39"},
{"uid":"JE","flag":"ğŸ‡¯ğŸ‡ª","code":"44"},
{"uid":"JM","flag":"ğŸ‡¯ğŸ‡²","code":"1876"},
{"uid":"JO","flag":"ğŸ‡¯ğŸ‡´","code":"962"},
{"uid":"JP","flag":"ğŸ‡¯ğŸ‡µ","code":"81"},
{"uid":"KE","flag":"ğŸ‡°ğŸ‡ª","code":"254"},
{"uid":"KG","flag":"ğŸ‡°ğŸ‡¬","code":"996"},
{"uid":"KH","flag":"ğŸ‡°ğŸ‡­","code":"855"},
{"uid":"KI","flag":"ğŸ‡°ğŸ‡®","code":"686"},
{"uid":"KM","flag":"ğŸ‡°ğŸ‡²","code":"269"},
{"uid":"KP","flag":"ğŸ‡°ğŸ‡µ","code":"850"},
{"uid":"KR","flag":"ğŸ‡°ğŸ‡·","code":"82"},
{"uid":"KW","flag":"ğŸ‡°ğŸ‡¼","code":"965"},
{"uid":"KY","flag":"ğŸ‡°ğŸ‡¾","code":"1345"},
{"uid":"KZ","flag":"ğŸ‡°ğŸ‡¿","code":"7"},
{"uid":"LA","flag":"ğŸ‡±ğŸ‡¦","code":"856"},
{"uid":"LB","flag":"ğŸ‡±ğŸ‡§","code":"961"},
{"uid":"LI","flag":"ğŸ‡±ğŸ‡®","code":"423"},
{"uid":"LK","flag":"ğŸ‡±ğŸ‡°","code":"94"},
{"uid":"LR","flag":"ğŸ‡±ğŸ‡·","code":"231"},
{"uid":"LS","flag":"ğŸ‡±ğŸ‡¸","code":"266"},
{"uid":"LT","flag":"ğŸ‡±ğŸ‡¹","code":"370"},
{"uid":"LU","flag":"ğŸ‡±ğŸ‡º","code":"352"},
{"uid":"LV","flag":"ğŸ‡±ğŸ‡»","code":"371"},
{"uid":"LY","flag":"ğŸ‡±ğŸ‡¾","code":"218"},
{"uid":"MA","flag":"ğŸ‡²ğŸ‡¦","code":"212"},
{"uid":"MC","flag":"ğŸ‡²ğŸ‡¨","code":"377"},
{"uid":"MD","flag":"ğŸ‡²ğŸ‡©","code":"373"},
{"uid":"ME","flag":"ğŸ‡²ğŸ‡ª","code":"382"},
{"uid":"MG","flag":"ğŸ‡²ğŸ‡¬","code":"261"},
{"uid":"MH","flag":"ğŸ‡²ğŸ‡­","code":"692"},
{"uid":"MK","flag":"ğŸ‡²ğŸ‡°","code":"389"},
{"uid":"ML","flag":"ğŸ‡²ğŸ‡±","code":"223"},
{"uid":"MN","flag":"ğŸ‡²ğŸ‡³","code":"976"},
{"uid":"MP","flag":"ğŸ‡²ğŸ‡µ","code":"1670"},
{"uid":"MQ","flag":"ğŸ‡²ğŸ‡¶","code":"596"},
{"uid":"MR","flag":"ğŸ‡²ğŸ‡·","code":"222"},
{"uid":"MS","flag":"ğŸ‡²ğŸ‡¸","code":"1664"},
{"uid":"MT","flag":"ğŸ‡²ğŸ‡¹","code":"356"},
{"uid":"MU","flag":"ğŸ‡²ğŸ‡º","code":"230"},
{"uid":"MV","flag":"ğŸ‡²ğŸ‡»","code":"960"},
{"uid":"MW","flag":"ğŸ‡²ğŸ‡¼","code":"265"},
{"uid":"MX","flag":"ğŸ‡²ğŸ‡½","code":"52"},
{"uid":"MY","flag":"ğŸ‡²ğŸ‡¾","code":"60"},
{"uid":"MZ","flag":"ğŸ‡²ğŸ‡¿","code":"258"},
{"uid":"NA","flag":"ğŸ‡³ğŸ‡¦","code":"264"},
{"uid":"NC","flag":"ğŸ‡³ğŸ‡¨","code":"687"},
{"uid":"NE","flag":"ğŸ‡³ğŸ‡ª","code":"227"},
{"uid":"NF","flag":"ğŸ‡³ğŸ‡«","code":"672"},
{"uid":"NG","flag":"ğŸ‡³ğŸ‡¬","code":"234"},
{"uid":"NI","flag":"ğŸ‡³ğŸ‡®","code":"505"},
{"uid":"NL","flag":"ğŸ‡³ğŸ‡±","code":"31"},
{"uid":"NO","flag":"ğŸ‡³ğŸ‡´","code":"47"},
{"uid":"NP","flag":"ğŸ‡³ğŸ‡µ","code":"977"},
{"uid":"NR","flag":"ğŸ‡³ğŸ‡·","code":"674"},
{"uid":"NU","flag":"ğŸ‡³ğŸ‡º","code":"683"},
{"uid":"NZ","flag":"ğŸ‡³ğŸ‡¿","code":"64"},
{"uid":"OM","flag":"ğŸ‡´ğŸ‡²","code":"968"},
{"uid":"PA","flag":"ğŸ‡µğŸ‡¦","code":"507"},
{"uid":"PE","flag":"ğŸ‡µğŸ‡ª","code":"51"},
{"uid":"PF","flag":"ğŸ‡µğŸ‡«","code":"689"},
{"uid":"PG","flag":"ğŸ‡µğŸ‡¬","code":"675"},
{"uid":"PH","flag":"ğŸ‡µğŸ‡­","code":"63"},
{"uid":"PK","flag":"ğŸ‡µğŸ‡°","code":"92"},
{"uid":"PL","flag":"ğŸ‡µğŸ‡±","code":"48"},
{"uid":"PR","flag":"ğŸ‡µğŸ‡·","code":"1"},
{"uid":"PT","flag":"ğŸ‡µğŸ‡¹","code":"351"},
{"uid":"PW","flag":"ğŸ‡µğŸ‡¼","code":"680"},
{"uid":"PY","flag":"ğŸ‡µğŸ‡¾","code":"595"},
{"uid":"QA","flag":"ğŸ‡¶ğŸ‡¦","code":"974"},
{"uid":"RE","flag":"ğŸ‡·ğŸ‡ª","code":"262"},
{"uid":"RO","flag":"ğŸ‡·ğŸ‡´","code":"40"},
{"uid":"RS","flag":"ğŸ‡·ğŸ‡¸","code":"381"},
{"uid":"RU","flag":"ğŸ‡·ğŸ‡º","code":"7"},
{"uid":"RW","flag":"ğŸ‡·ğŸ‡¼","code":"250"},
{"uid":"SA","flag":"ğŸ‡¸ğŸ‡¦","code":"966"},
{"uid":"SB","flag":"ğŸ‡¸ğŸ‡§","code":"677"},
{"uid":"SC","flag":"ğŸ‡¸ğŸ‡¨","code":"248"},
{"uid":"SD","flag":"ğŸ‡¸ğŸ‡©","code":"249"},
{"uid":"SE","flag":"ğŸ‡¸ğŸ‡ª","code":"46"},
{"uid":"SG","flag":"ğŸ‡¸ğŸ‡¬","code":"65"},
{"uid":"SI","flag":"ğŸ‡¸ğŸ‡®","code":"386"},
{"uid":"SK","flag":"ğŸ‡¸ğŸ‡°","code":"421"},
{"uid":"SL","flag":"ğŸ‡¸ğŸ‡±","code":"232"},
{"uid":"SM","flag":"ğŸ‡¸ğŸ‡²","code":"378"},
{"uid":"SN","flag":"ğŸ‡¸ğŸ‡³","code":"221"},
{"uid":"SO","flag":"ğŸ‡¸ğŸ‡´","code":"252"},
{"uid":"SR","flag":"ğŸ‡¸ğŸ‡·","code":"597"},
{"uid":"SS","flag":"ğŸ‡¸ğŸ‡¸","code":"211"},
{"uid":"SV","flag":"ğŸ‡¸ğŸ‡»","code":"503"},
{"uid":"SX","flag":"ğŸ‡¸ğŸ‡½","code":"599"},
{"uid":"SY","flag":"ğŸ‡¸ğŸ‡¾","code":"963"},
{"uid":"SZ","flag":"ğŸ‡¸ğŸ‡¿","code":"268"},
{"uid":"TD","flag":"ğŸ‡¹ğŸ‡©","code":"235"},
{"uid":"TG","flag":"ğŸ‡¹ğŸ‡¬","code":"228"},
{"uid":"TH","flag":"ğŸ‡¹ğŸ‡­","code":"66"},
{"uid":"TJ","flag":"ğŸ‡¹ğŸ‡¯","code":"992"},
{"uid":"TK","flag":"ğŸ‡¹ğŸ‡°","code":"690"},
{"uid":"TL","flag":"ğŸ‡¹ğŸ‡±","code":"670"},
{"uid":"TM","flag":"ğŸ‡¹ğŸ‡²","code":"993"},
{"uid":"TN","flag":"ğŸ‡¹ğŸ‡³","code":"216"},
{"uid":"TO","flag":"ğŸ‡¹ğŸ‡´","code":"676"},
{"uid":"TR","flag":"ğŸ‡¹ğŸ‡·","code":"90"},
{"uid":"TV","flag":"ğŸ‡¹ğŸ‡»","code":"688"},
{"uid":"TW","flag":"ğŸ‡¹ğŸ‡¼","code":"886"},
{"uid":"TZ","flag":"ğŸ‡¹ğŸ‡¿","code":"255"},
{"uid":"UA","flag":"ğŸ‡ºğŸ‡¦","code":"380"},
{"uid":"UG","flag":"ğŸ‡ºğŸ‡¬","code":"256"},
{"uid":"US","flag":"ğŸ‡ºğŸ‡¸","code":"1"},
{"uid":"UY","flag":"ğŸ‡ºğŸ‡¾","code":"598"},
{"uid":"UZ","flag":"ğŸ‡ºğŸ‡¿","code":"998"},
{"uid":"VA","flag":"ğŸ‡»ğŸ‡¦","code":"39"},
{"uid":"VE","flag":"ğŸ‡»ğŸ‡ª","code":"58"},
{"uid":"VG","flag":"ğŸ‡»ğŸ‡¬","code":"1284"},
{"uid":"VN","flag":"ğŸ‡»ğŸ‡³","code":"84"},
{"uid":"VU","flag":"ğŸ‡»ğŸ‡º","code":"678"},
{"uid":"WS","flag":"ğŸ‡¼ğŸ‡¸","code":"685"},
{"uid":"XK","flag":"ğŸ‡½ğŸ‡°","code":"381"},
{"uid":"YE","flag":"ğŸ‡¾ğŸ‡ª","code":"967"},
{"uid":"YT","flag":"ğŸ‡¾ğŸ‡¹","code":"262"},
{"uid":"ZA","flag":"ğŸ‡¿ğŸ‡¦","code":"27"},
{"uid":"ZM","flag":"ğŸ‡¿ğŸ‡²","code":"260"},
{"uid":"ZW","flag":"ğŸ‡¿ğŸ‡¼","code":"263"}]
class Phone extends React.Component {
        onChange(){
            var num=event.target.value;
            var hide=!Number.isNaN(num)
            document.getElementById("numWarning").hidden=hide;
            errors[2]=hide
        }
        selCountry(){
        contCode=document.getElementById("country").value;

        }
        render() {
          const countries= countryCodes.map((country) =>
        <option value={country.code}>{country.flag}  +{country.code}</option>
    );
          return (<div><b>Date of Birth:</b>
          <select onChange={this.selCountry}  name="tel_code" id="country">{countries}</select><input onChange={this.onChange} name="num"></input>
          <span id="numWarning" style={{color:"red",cursor: "default"}} hidden>
            <abbr title="Number must be digits!">&#9888;</abbr>
          </span></div>)
        }
      }
class Email extends React.Component {
        onChange(){
            var mail=event.target.value;
            var hide=true
            mail=mail.split("@")
            if(mail.length!=2)
                hide=false
            else{
                if(mail[1].split(".").length<2)
                hide=false
                else
                {
                validChars=["+","-","_","~","."]
                mail=mail[0]+mail[1]
                for(var i in mail)
                    if (!(/[a-zA-Z0-9]/).test(mail[i])&&!(validChars.includes(mail[i])))
                    hide=false;
                }
            }
            document.getElementById("emailWarning").hidden=hide;
            errors[3]=hide
        }
        render() {
          return (<div><b>Date of Birth:</b>
          <input onChange={this.onChange} name="email" ></input>
          <span id="emailWarning" style={{color:"red",cursor: "default"}} hidden>
            <abbr title="Email Syntax Invalid!">&#9888;</abbr>
          </span></div>)
        }
      }
makeForm();